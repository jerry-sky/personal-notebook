\usepackage{csquotes}
\usepackage{framed}

\DeclareUnicodeCharacter{2212}{\textendash}

\renewenvironment{leftbar}[1][\hsize]
{%
    \def\FrameCommand
    {%
        {\color{lightgray}\vrule width 1.3pt}%
        \hspace{10pt}%
        \fboxsep=\FrameSep%
    }%
    \MakeFramed{\hsize#1\advance\hsize-\width\FrameRestore}%
}
{\endMakeFramed}

\AtBeginEnvironment{quote}{\vspace{1em}\itshape\leftbar}
\AtEndEnvironment{quote}{\vspace{1em}\endleftbar}

\setlength{\parskip}{1.3em}

\usepackage{titlesec}
\titlespacing*{\subsection}
{0pt}{1.5em plus 1em minus .2em}{1.5em plus .2em}

\usepackage{float}
\let\origfigure\figure
\let\endorigfigure\endfigure
\renewenvironment{figure}[1][2] {
    \expandafter\origfigure\expandafter[H]
} {
    \endorigfigure
}

\let\oldrule\rule
\renewcommand{\rule}[2]{\color{gray}\oldrule{\linewidth}{0.1pt}}

\makeatletter
\renewcommand{\@seccntformat}[1]{}
\makeatother

\makeatletter
\let\latexl@section\l@section

\def\dottednumberline#1{}

% \hb@xt@\@tempdima{\S#1.\hfil}

\renewcommand{\l@section}[2]{
    {
        \begingroup
        \let\numberline\@gobble\latexl@section{#1}{#2}
        \endgroup
    }
}

\renewcommand{\l@subsection}[2]{
    {
        \begingroup
        \let\numberline\dottednumberline\@dottedtocline{2}{2.4em}{2.6em}{#1}{#2}
        \endgroup
    }
}

\renewcommand{\l@subsubsection}[2]{
    {
        \begingroup
        \let\numberline\dottednumberline\@dottedtocline{3}{5.2em}{2.6em}{#1}{#2}
        \endgroup
    }
}

\renewcommand{\l@paragraph}[2]{
    {
        \begingroup
        \let\numberline\dottednumberline\@dottedtocline{3}{7.2em}{2.6em}{#1}{#2}
        \endgroup
    }
}

\makeatother
